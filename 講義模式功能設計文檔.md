# è¬›ç¾©æ¨¡å¼åŠŸèƒ½è¨­è¨ˆæ–‡æª” (Handout Mode Design Document)

## æ–‡æª”è³‡è¨Š
- **å°ˆæ¡ˆåç¨±**: Dubtitle - é›™è¦–çª—å­—å¹•å­¸ç¿’ç³»çµ±
- **è¨­è¨ˆè€…**: Agent-3 (æ•™è‚²æŠ€è¡“å°ˆå®¶)
- **è¨­è¨ˆæ—¥æœŸ**: 2025-11-16
- **ç‰ˆæœ¬**: v1.0

---

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

### 1.1 æ ¸å¿ƒåƒ¹å€¼ä¸»å¼µ
è¬›ç¾©æ¨¡å¼å°‡ Dubtitle å¾ã€Œè¢«å‹•è§€çœ‹å·¥å…·ã€å‡ç´šç‚ºã€Œä¸»å‹•å­¸ç¿’å¹³å°ã€ï¼Œé€éå³æ™‚é›£å­—æ¨™è¨˜èˆ‡è©å½™é¢æ¿ï¼Œå¯¦ç¾ã€Œå½±ç‰‡å¼èªå¢ƒå–®å­—å­¸ç¿’ã€ï¼Œç¬¦åˆ 2025 å¹´èªè¨€å­¸ç¿’ç ”ç©¶çš„æœ€ä½³å¯¦è¸ã€‚

### 1.2 ç›®æ¨™ä½¿ç”¨è€…
- å¤šç›Š/æ‰˜ç¦è€ƒç”Ÿï¼ˆéœ€è¦å¿«é€Ÿç´¯ç©è€ƒè©¦è©å½™ï¼‰
- å­¸æ¸¬/æŒ‡è€ƒè€ƒç”Ÿï¼ˆéœ€è¦æŒæ¡åˆ†ç´šè©å½™ï¼‰
- è‹±èªå­¸ç¿’è€…ï¼ˆå¸Œæœ›é€éå½±ç‰‡å­¸ç¿’çœŸå¯¦èªå¢ƒä¸­çš„å–®å­—ï¼‰
- æ•™è‚²å·¥ä½œè€…ï¼ˆéœ€è¦è£½ä½œæ•™å­¸ç´ æï¼‰

### 1.3 åŸºæ–¼ç ”ç©¶çš„è¨­è¨ˆåŸå‰‡

æ ¹æ“š 2025 å¹´æœ€æ–°èªè¨€å­¸ç¿’ç ”ç©¶ï¼š

1. **é›™å­—å¹•æ•ˆç›Š** (Dual-Subtitle Learning)
   - ç ”ç©¶é¡¯ç¤ºé›™å­—å¹•è§€çœ‹èƒ½é¡¯è‘—æå‡è©å½™å­¸ç¿’æ•ˆæœ
   - æœ¬è¨­è¨ˆï¼šåŸå­—å¹• + é›£å­—é«˜äº®æ¨™è¨˜ = æ··åˆè¦–è¦ºæç¤º

2. **é‡è¤‡è§€çœ‹ç­–ç•¥** (Spaced Repetition)
   - å–®æ¬¡è§€çœ‹ä¸è¶³ä»¥è®“å­¸ç¿’è€…æ³¨æ„åˆ°ç”Ÿå­—çš„å½¢å¼èˆ‡æ„ç¾©
   - æœ¬è¨­è¨ˆï¼šæ¨™è¨˜ç³»çµ±ä¿ƒé€²å­¸ç¿’è€…ä¸»å‹•é‡è¤‡è§€çœ‹ç‰¹å®šç‰‡æ®µ

3. **è¼¸å‡ºå°å‘å­¸ç¿’** (Output-Input Viewing)
   - è¼¸å‡º-è¼¸å…¥æ¨¡å¼æ¯”ç´”è¼¸å…¥æ¨¡å¼å¸¶ä¾†æ›´å¼·çš„è©å½™ä¿ç•™
   - æœ¬è¨­è¨ˆï¼šè¬›ç¾©é¢æ¿æä¾›äº’å‹•å…ƒç´ ï¼Œé¼“å‹µä¸»å‹•æŸ¥è©¢èˆ‡è¨˜éŒ„

---

## äºŒã€UI/UX è¨­è¨ˆ

### 2.1 ä»‹é¢æ¶æ§‹ (ASCII Mockup)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Player Page (å·¦è¦–çª—)           â”‚  Subtitle Page (å³è¦–çª—)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚â–“â–“â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚ è¬›ç¾©é¢æ¿ [Handout Panel]â”‚   â”‚
â”‚     YouTube Player           â”‚â–“â–“â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚ â”‚ ç•¶å‰å¥å­é›£å­—åˆ—è¡¨   â”‚   â”‚   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚ â”‚ â€¢ acquisition â˜…â˜…â˜… â”‚   â”‚   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚ â”‚ â€¢ implement   â˜…â˜…â˜† â”‚   â”‚   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚                         â”‚   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚ [é¸ä¸­: acquisition]     â”‚   â”‚
â”‚                              â”‚â–“â–“â”‚ â”‚ ğŸ“– /ËŒÃ¦kwÉªËˆzÉªÊƒÉ™n/       â”‚   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â–“â–“â”‚ â”‚ n. ç²å¾—ï¼›ç¿’å¾—           â”‚   â”‚
â”‚ [æ§åˆ¶é¢æ¿]                    â”‚â–“â–“â”‚ â”‚                         â”‚   â”‚
â”‚ Timing: [â–¶] Advanced [-]     â”‚â–“â–“â”‚ â”‚ ä¾‹å¥:                   â”‚   â”‚
â”‚ Handout: [âœ“] ON  [Level: å¤šç›Š]â”‚â–“â–“â”‚ â”‚ "Language acquisition  â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜ â”‚  requires practice."    â”‚   â”‚
                                    â”‚                         â”‚   â”‚
                                    â”‚ [+ åŠ å…¥è¤‡ç¿’æ¸…å–®] [ğŸ“‹]    â”‚   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                                                  â”‚
    Full-screen Subtitle Area (å­—å¹•ä¸»é¡¯ç¤ºå€)                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚                                            â”‚              â”‚
    â”‚   The rapid acquisition of language        â”‚              â”‚
    â”‚          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚              â”‚
    â”‚         (é«˜äº® + åº•ç·š)                       â”‚              â”‚
    â”‚   skills requires consistent practice.     â”‚              â”‚
    â”‚                                            â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                                                                â”‚
    [èƒŒæ™¯è‰²] [å­—é«”è‰²] [å­—é«”å¤§å°] [ç²—é«”] [é™°å½±] [é«˜äº®ç­†]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœ–ä¾‹ï¼š
â–“â–“ = å¯æ‹–æ›³åˆ†éš”ç·š (Draggable Divider)
â˜…â˜…â˜… = é›£åº¦ç­‰ç´š (3æ˜Ÿ=é«˜é›£åº¦ TOEIC 600+)
```

### 2.2 è¬›ç¾©é¢æ¿è©³ç´°è¨­è¨ˆ

#### 2.2.1 é¢æ¿ä½ç½®èˆ‡è¡Œç‚º
- **ä½ç½®**: å³è¦–çª—å·¦ä¸Šè§’ï¼ˆå›ºå®šæ–¼ Subtitle Pageï¼‰
- **å°ºå¯¸**: åˆå§‹ 300px Ã— 400px
- **ç‹€æ…‹**:
  - é è¨­æ‘ºç–Šï¼ˆåƒ…é¡¯ç¤ºæ¨™é¡Œåˆ—èˆ‡é›£å­—æ•¸é‡ï¼‰
  - é»æ“Šå±•é–‹é¡¯ç¤ºå®Œæ•´å…§å®¹
  - å¯æ‹–æ›³è‡³ä»»æ„ä½ç½®ï¼ˆä½†é™åˆ¶åœ¨è¦–çª—ç¯„åœå…§ï¼‰
- **å±¤ç´š**: z-index é«˜æ–¼å­—å¹•ä½†ä½æ–¼æ§åˆ¶é¢æ¿

#### 2.2.2 é¢æ¿å…§å®¹çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“š è¬›ç¾©é¢æ¿          [â”€] [Ã—]       â”‚  â† æ¨™é¡Œåˆ—ï¼ˆå¯æ‹–æ›³ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ ç•¶å‰å¥å­ (3å€‹é›£å­—)                â”‚  â† é›£å­—æ‘˜è¦
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â€¢ acquisition      â˜…â˜…â˜…  [TOEIC] â”‚ â”‚  â† é›£å­—åˆ—è¡¨
â”‚ â”‚ â€¢ consistent       â˜…â˜…â˜†  [å­¸æ¸¬5] â”‚ â”‚
â”‚ â”‚ â€¢ practice         â˜…â˜†â˜†  [å­¸æ¸¬3] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ ğŸ“– è©å½™è©³æƒ…                          â”‚  â† é¸ä¸­å–®å­—è©³æƒ…
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ acquisition                      â”‚ â”‚
â”‚ â”‚ /ËŒÃ¦kwÉªËˆzÉªÊƒÉ™n/          ğŸ”Š        â”‚ â”‚  â† ç™¼éŸ³ï¼ˆTTSï¼‰
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ n. ç²å¾—ï¼›ç¿’å¾—ï¼›æ”¶è³¼                â”‚ â”‚  â† å®šç¾©
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ ğŸ“Œ å¸¸è¦‹æ­é…:                      â”‚ â”‚
â”‚ â”‚   â€¢ language acquisition         â”‚ â”‚
â”‚ â”‚   â€¢ data acquisition             â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ ğŸ’¡ ä¾‹å¥:                          â”‚ â”‚
â”‚ â”‚   The acquisition of knowledge   â”‚ â”‚
â”‚ â”‚   is a lifelong process.         â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ ğŸ¯ å¤šç›Šåˆ†é¡: Business/Academic    â”‚ â”‚
â”‚ â”‚ ğŸ“Š å‡ºç¾é »ç‡: é«˜                   â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ [+ åŠ å…¥è¤‡ç¿’æ¸…å–®] [å·²æŒæ¡ âœ“]       â”‚ â”‚  â† äº’å‹•æŒ‰éˆ•
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ ğŸ“‹ æœ¬å½±ç‰‡é›£å­—çµ±è¨ˆ                    â”‚  â† å½±ç‰‡ç´šçµ±è¨ˆ
â”‚ â€¢ å¤šç›Šé«˜ç´š: 12å€‹                     â”‚
â”‚ â€¢ å¤šç›Šä¸­ç´š: 25å€‹                     â”‚
â”‚ â€¢ å­¸æ¸¬6-7ç´š: 8å€‹                     â”‚
â”‚                                     â”‚
â”‚ [åŒ¯å‡ºæœ¬å½±ç‰‡è¬›ç¾© ğŸ“„]                  â”‚  â† åŠŸèƒ½æŒ‰éˆ•
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 å­—å¹•ä¸»é¡¯ç¤ºå€æ¨™è¨˜æ¨£å¼

#### 2.3.1 é›£å­—æ¨™è¨˜ CSS è¨­è¨ˆ

```css
/* å¤šç›Šé›£åº¦åˆ†ç´šæ¨™è¨˜ */
.word-highlight {
  position: relative;
  display: inline-block;
  cursor: pointer;
  transition: all 0.2s ease;
}

/* æ˜“ (TOEIC 0-400) */
.word-highlight.level-easy {
  color: #10b981; /* ç¶ è‰² */
  border-bottom: 2px dotted #10b981;
}

/* ä¸­ (TOEIC 400-600) */
.word-highlight.level-medium {
  color: #f59e0b; /* æ©˜è‰² */
  border-bottom: 2px dashed #f59e0b;
}

/* é›£ (TOEIC 600+) */
.word-highlight.level-hard {
  color: #ef4444; /* ç´…è‰² */
  border-bottom: 2px solid #ef4444;
  font-weight: 600;
}

/* å­¸æ¸¬åˆ†ç´š (1-7ç´š) */
.word-highlight.gsat-1-3 {
  border-bottom: 2px dotted #60a5fa;
}

.word-highlight.gsat-4-5 {
  border-bottom: 2px dashed #a78bfa;
}

.word-highlight.gsat-6-7 {
  border-bottom: 2px solid #f472b6;
  font-weight: 600;
}

/* Hover æ•ˆæœ - é¡¯ç¤º Tooltip */
.word-highlight:hover {
  transform: translateY(-2px);
  filter: brightness(1.2);
}

.word-highlight::after {
  content: attr(data-definition);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.95);
  color: white;
  border-radius: 6px;
  font-size: 14px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  z-index: 1000;
}

.word-highlight:hover::after {
  opacity: 1;
}

/* é»æ“Šå¾Œé«˜äº®é¸ä¸­ç‹€æ…‹ */
.word-highlight.selected {
  background: rgba(59, 130, 246, 0.2);
  padding: 2px 4px;
  border-radius: 4px;
}
```

#### 2.3.2 è¦–è¦ºè¨­è¨ˆåŸå‰‡

1. **ä¸å¹²æ“¾è§€çœ‹**
   - åº•ç·šæ¨£å¼ï¼ˆdotted/dashed/solidï¼‰ä»£æ›¿èƒŒæ™¯è‰²å¡Š
   - é¡è‰²é£½å’Œåº¦æ§åˆ¶åœ¨ 60-70%ï¼Œé¿å…éæ–¼åˆºçœ¼
   - Hover æ‰é¡¯ç¤ºå®Œæ•´å®šç¾©ï¼Œå¸¸æ…‹åƒ…é¡¯ç¤ºæ¨™è¨˜

2. **å¿«é€Ÿè­˜åˆ¥é›£åº¦**
   - é¡è‰²å¿ƒç†å­¸ï¼šç¶ â†’æ©˜â†’ç´…ï¼ˆç°¡å–®åˆ°å›°é›£ï¼‰
   - ç·šæ¢æ¨£å¼ï¼šé»ç·šâ†’è™›ç·šâ†’å¯¦ç·šï¼ˆé›£åº¦éå¢ï¼‰
   - å­—é‡è®ŠåŒ–ï¼šnormal â†’ semiboldï¼ˆé«˜é›£åº¦åŠ ç²—ï¼‰

3. **éŸ¿æ‡‰å¼äº’å‹•**
   - Hover: è¼•å¾®ä¸Šæµ® + Tooltip
   - Click: åœ¨è¬›ç¾©é¢æ¿é¡¯ç¤ºè©³ç´°è³‡è¨Š
   - Active: è—è‰²é¸ä¸­ç‹€æ…‹ï¼ˆèˆ‡é¢æ¿åŒæ­¥ï¼‰

### 2.4 æ§åˆ¶é–‹é—œè¨­è¨ˆ

åœ¨ Player Page çš„æ§åˆ¶é¢æ¿æ–°å¢è¬›ç¾©æ¨¡å¼é–‹é—œï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Timing Adjustment                â”‚
â”‚  [â–¶] Advanced Settings [-]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“š Handout Mode                  â”‚
â”‚  [âœ“] Enable                       â”‚
â”‚  Difficulty: [å¤šç›Š â–¾]             â”‚
â”‚    â””â”€ Options:                    â”‚
â”‚       â€¢ å¤šç›Šåˆ†ç´š (Easy/Med/Hard)   â”‚
â”‚       â€¢ å­¸æ¸¬åˆ†ç´š (Level 1-7)       â”‚
â”‚       â€¢ æ‰˜ç¦åˆ†ç´š                    â”‚
â”‚       â€¢ è‡ªè¨‚å–®å­—è¡¨                  â”‚
â”‚                                   â”‚
â”‚  Color Scheme: [Default â–¾]        â”‚
â”‚    â””â”€ Presets:                    â”‚
â”‚       â€¢ Traffic Light (é è¨­)       â”‚
â”‚       â€¢ Blue Scale (å–®è‰²ç³»)        â”‚
â”‚       â€¢ High Contrast (é«˜å°æ¯”)     â”‚
â”‚       â€¢ Custom (è‡ªè¨‚)              â”‚
â”‚                                   â”‚
â”‚  [âš™ï¸ Advanced Settings...]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€æŠ€è¡“æ¶æ§‹

### 3.1 è³‡æ–™çµæ§‹è¨­è¨ˆ

#### 3.1.1 å–®å­—è¡¨æ ¼å¼ (JSON Schema)

é¸æ“‡ **JSON** ä½œç‚ºå–®å­—è¡¨æ ¼å¼ï¼ŒåŸå› ï¼š
- æ˜“æ–¼è§£æèˆ‡æŸ¥è©¢
- æ”¯æ´çµæ§‹åŒ–è³‡è¨Šï¼ˆéŸ³æ¨™ã€ä¾‹å¥ã€åˆ†é¡ï¼‰
- å¯å‹•æ…‹æ›´æ–°èˆ‡æ“´å±•
- èˆ‡ API æ•´åˆæ–¹ä¾¿

```json
{
  "vocabulary": {
    "toeic": {
      "version": "2025.1",
      "lastUpdated": "2025-11-16",
      "words": [
        {
          "word": "acquisition",
          "level": "hard",
          "score": 650,
          "phonetic": "/ËŒÃ¦kwÉªËˆzÉªÊƒÉ™n/",
          "definitions": [
            {
              "partOfSpeech": "noun",
              "meaning_zh": "ç²å¾—ï¼›ç¿’å¾—ï¼›æ”¶è³¼",
              "meaning_en": "the act of acquiring something"
            }
          ],
          "examples": [
            "Language acquisition requires consistent practice.",
            "The company announced the acquisition of a competitor."
          ],
          "collocations": [
            "language acquisition",
            "data acquisition",
            "acquisition cost"
          ],
          "frequency": "high",
          "category": ["business", "academic"],
          "synonyms": ["purchase", "attainment", "procurement"],
          "tags": ["formal", "academic"]
        }
      ]
    },
    "gsat": {
      "version": "2025.1",
      "lastUpdated": "2025-11-16",
      "levels": {
        "1": [ /* åŸºç¤å–®å­— */ ],
        "2": [ /* ... */ ],
        "7": [ /* é€²éšå–®å­— */ ]
      }
    }
  }
}
```

#### 3.1.2 å–®å­—è¡¨è¼‰å…¥ç­–ç•¥

```typescript
// lib/vocabularyLoader.ts

interface VocabularyWord {
  word: string;
  level: 'easy' | 'medium' | 'hard';
  score?: number; // TOEIC score range
  gsatLevel?: 1 | 2 | 3 | 4 | 5 | 6 | 7;
  phonetic: string;
  definitions: Definition[];
  examples: string[];
  collocations?: string[];
  frequency?: 'low' | 'medium' | 'high';
  category?: string[];
}

interface VocabularyDatabase {
  toeic: Map<string, VocabularyWord>;
  gsat: Map<string, VocabularyWord>;
  custom: Map<string, VocabularyWord>;
}

class VocabularyLoader {
  private static instance: VocabularyLoader;
  private db: VocabularyDatabase;
  private loaded: boolean = false;

  // Singleton pattern
  public static getInstance(): VocabularyLoader {
    if (!VocabularyLoader.instance) {
      VocabularyLoader.instance = new VocabularyLoader();
    }
    return VocabularyLoader.instance;
  }

  // Lazy loading
  async loadVocabulary(type: 'toeic' | 'gsat' | 'custom'): Promise<void> {
    if (this.loaded) return;

    const response = await fetch(`/api/vocabulary/${type}`);
    const data = await response.json();

    // Build hash map for O(1) lookup
    this.db[type] = new Map(
      data.words.map((word: VocabularyWord) => [word.word.toLowerCase(), word])
    );

    this.loaded = true;
  }

  // Fast lookup
  lookup(word: string, type: 'toeic' | 'gsat' = 'toeic'): VocabularyWord | null {
    return this.db[type]?.get(word.toLowerCase()) || null;
  }

  // Batch lookup for subtitle sentence
  batchLookup(sentence: string, type: 'toeic' | 'gsat' = 'toeic'): VocabularyWord[] {
    const words = this.tokenize(sentence);
    return words
      .map(w => this.lookup(w, type))
      .filter(w => w !== null) as VocabularyWord[];
  }

  private tokenize(sentence: string): string[] {
    // Remove punctuation and split
    return sentence
      .toLowerCase()
      .replace(/[^\w\s]/g, '')
      .split(/\s+/)
      .filter(w => w.length > 2); // Filter short words
  }
}
```

### 3.2 åŒ¹é…æ¼”ç®—æ³•è¨­è¨ˆ

#### 3.2.1 æ•ˆèƒ½å„ªåŒ–ç­–ç•¥

```typescript
// lib/subtitleProcessor.ts

interface ProcessedSubtitle {
  start: number;
  end: number;
  text: string;
  words: Array<{
    word: string;
    startIndex: number;
    endIndex: number;
    data: VocabularyWord | null;
  }>;
  difficultWordCount: number;
}

class SubtitleProcessor {
  private vocabularyLoader: VocabularyLoader;
  private cache: Map<string, ProcessedSubtitle>;

  constructor() {
    this.vocabularyLoader = VocabularyLoader.getInstance();
    this.cache = new Map();
  }

  // Process subtitle with word matching
  processSubtitle(subtitle: Subtitle, vocabType: 'toeic' | 'gsat'): ProcessedSubtitle {
    // Check cache first
    const cacheKey = `${subtitle.text}-${vocabType}`;
    if (this.cache.has(cacheKey)) {
      return this.cache.get(cacheKey)!;
    }

    // Tokenize and match
    const tokens = this.tokenizeWithPositions(subtitle.text);
    const words = tokens.map(token => ({
      word: token.word,
      startIndex: token.start,
      endIndex: token.end,
      data: this.vocabularyLoader.lookup(token.word, vocabType)
    }));

    const difficultWordCount = words.filter(w =>
      w.data && (w.data.level === 'hard' || w.data.level === 'medium')
    ).length;

    const result: ProcessedSubtitle = {
      ...subtitle,
      words,
      difficultWordCount
    };

    // Cache for performance
    this.cache.set(cacheKey, result);
    return result;
  }

  private tokenizeWithPositions(text: string): Array<{word: string, start: number, end: number}> {
    const regex = /\b[a-zA-Z]+\b/g;
    const tokens: Array<{word: string, start: number, end: number}> = [];
    let match;

    while ((match = regex.exec(text)) !== null) {
      if (match[0].length > 2) { // Filter short words
        tokens.push({
          word: match[0].toLowerCase(),
          start: match.index,
          end: match.index + match[0].length
        });
      }
    }

    return tokens;
  }

  // Clear cache when vocabulary type changes
  clearCache(): void {
    this.cache.clear();
  }
}
```

#### 3.2.2 æ¼”ç®—æ³•æ•ˆèƒ½åˆ†æ

| æ“ä½œ | æ™‚é–“è¤‡é›œåº¦ | èªªæ˜ |
|-----|----------|------|
| å–®å­—æŸ¥è©¢ (Hash Map) | O(1) | ä½¿ç”¨ Map è³‡æ–™çµæ§‹ |
| å¥å­åˆ†è© (Regex) | O(n) | n = å¥å­é•·åº¦ |
| æ‰¹æ¬¡åŒ¹é… | O(m) | m = å–®å­—æ•¸é‡ |
| æ•´é«”è™•ç†å–®å¥ | O(n + m) | ç·šæ€§æ™‚é–“ï¼Œé«˜æ•ˆ |

**é æœŸæ•ˆèƒ½**ï¼š
- è™•ç†ä¸€å¥å­—å¹• (å¹³å‡10å€‹å–®å­—): < 1ms
- è™•ç†æ•´éƒ¨å½±ç‰‡å­—å¹• (1000å¥): < 1ç§’
- è¨˜æ†¶é«”ä½”ç”¨: ~5-10MB (å–®å­—è¡¨ + Cache)

### 3.3 å­—å…¸ API æ•´åˆ

#### 3.3.1 API é¸æ“‡èˆ‡è©•ä¼°

| API | å„ªé» | ç¼ºé» | æ¨è–¦åº¦ |
|-----|------|------|--------|
| **Free Dictionary API** | å®Œå…¨å…è²»ã€ç„¡éœ€ API Keyã€åŒ…å«éŸ³æ¨™èˆ‡ä¾‹å¥ | è©æ¢å¯èƒ½ä¸å®Œæ•´ | â­â­â­â­ |
| **Cambridge Dictionary** | æ¬Šå¨ã€ç™¼éŸ³æº–ç¢ºã€å­¸ç¿’è€…å‹å–„ | éœ€è¦çˆ¬èŸ²æˆ–ä»˜è²» API | â­â­â­ |
| **Oxford Dictionary API** | æœ€æ¬Šå¨ã€è©æ¢å®Œæ•´ | æ˜‚è²´ ($500+/æœˆ) | â­â­ |
| **Web Speech API (TTS)** | ç€è¦½å™¨å…§å»ºã€å³æ™‚ç™¼éŸ³ | éœ€è¦ç¶²è·¯ã€å“è³ªä¸ä¸€ | â­â­â­â­ |
| **æœ¬åœ°å–®å­—è¡¨ + Fallback API** | å¿«é€Ÿã€å¯æ§ã€æˆæœ¬ä½ | éœ€è¦ç¶­è­·å–®å­—è¡¨ | â­â­â­â­â­ |

**æœ€çµ‚æ–¹æ¡ˆ**ï¼šæ··åˆç­–ç•¥
1. **ä¸»è¦ä¾†æº**ï¼šæœ¬åœ° JSON å–®å­—è¡¨ï¼ˆæ‰‹å‹•æ•´ç† + ChatGPT è¼”åŠ©ç”Ÿæˆï¼‰
2. **å‚™æ´ä¾†æº**ï¼šFree Dictionary API (`https://api.dictionaryapi.dev/api/v2/entries/en/{word}`)
3. **ç™¼éŸ³**ï¼šWeb Speech API (ç€è¦½å™¨ TTS)

#### 3.3.2 API æ•´åˆå¯¦ä½œ

```typescript
// lib/dictionaryAPI.ts

interface DictionaryResult {
  word: string;
  phonetic: string;
  definitions: Definition[];
  examples: string[];
  audioUrl?: string;
}

class DictionaryAPI {
  private cache: Map<string, DictionaryResult> = new Map();

  async lookup(word: string): Promise<DictionaryResult | null> {
    // Check cache
    if (this.cache.has(word)) {
      return this.cache.get(word)!;
    }

    try {
      // Try Free Dictionary API
      const response = await fetch(
        `https://api.dictionaryapi.dev/api/v2/entries/en/${word}`
      );

      if (!response.ok) {
        return null;
      }

      const data = await response.json();
      const result = this.parseDictionaryResponse(data);

      // Cache result
      this.cache.set(word, result);
      return result;
    } catch (error) {
      console.error('Dictionary API error:', error);
      return null;
    }
  }

  private parseDictionaryResponse(data: any[]): DictionaryResult {
    const entry = data[0];
    const meanings = entry.meanings[0];

    return {
      word: entry.word,
      phonetic: entry.phonetic || entry.phonetics[0]?.text || '',
      definitions: meanings.definitions.slice(0, 3).map((def: any) => ({
        partOfSpeech: meanings.partOfSpeech,
        meaning_zh: '', // Need translation
        meaning_en: def.definition
      })),
      examples: meanings.definitions
        .filter((def: any) => def.example)
        .slice(0, 2)
        .map((def: any) => def.example),
      audioUrl: entry.phonetics.find((p: any) => p.audio)?.audio
    };
  }

  // Text-to-Speech using Web Speech API
  speak(word: string): void {
    if ('speechSynthesis' in window) {
      const utterance = new SpeechSynthesisUtterance(word);
      utterance.lang = 'en-US';
      utterance.rate = 0.8; // Slower for learning
      window.speechSynthesis.speak(utterance);
    }
  }
}
```

### 3.4 Component æ¶æ§‹

```
components/
â”œâ”€â”€ HandoutPanel/
â”‚   â”œâ”€â”€ HandoutPanel.tsx          # ä¸»é¢æ¿å®¹å™¨
â”‚   â”œâ”€â”€ WordList.tsx               # é›£å­—åˆ—è¡¨
â”‚   â”œâ”€â”€ WordDetail.tsx             # å–®å­—è©³æƒ…å¡ç‰‡
â”‚   â”œâ”€â”€ VideoStats.tsx             # å½±ç‰‡çµ±è¨ˆ
â”‚   â””â”€â”€ ExportButton.tsx           # åŒ¯å‡ºè¬›ç¾©æŒ‰éˆ•
â”‚
â”œâ”€â”€ SubtitlePanel/
â”‚   â”œâ”€â”€ SubtitlePanel.tsx          # åŸæœ‰çµ„ä»¶ï¼ˆä¿®æ”¹ï¼‰
â”‚   â”œâ”€â”€ HighlightedWord.tsx        # æ–°å¢ï¼šé«˜äº®å–®å­—çµ„ä»¶
â”‚   â””â”€â”€ WordTooltip.tsx            # æ–°å¢ï¼šHover æç¤º
â”‚
â””â”€â”€ Controls/
    â””â”€â”€ HandoutModeControl.tsx     # è¬›ç¾©æ¨¡å¼é–‹é—œ
```

#### 3.4.1 æ ¸å¿ƒçµ„ä»¶å¯¦ä½œç¯„ä¾‹

```typescript
// components/HandoutPanel/HandoutPanel.tsx

'use client';

import { useState, useEffect } from 'react';
import { VocabularyWord } from '@/lib/vocabularyLoader';
import WordList from './WordList';
import WordDetail from './WordDetail';
import VideoStats from './VideoStats';

interface HandoutPanelProps {
  currentSubtitle: string;
  difficultWords: VocabularyWord[];
  videoStats: {
    toeicHard: number;
    toeicMedium: number;
    gsatAdvanced: number;
  };
  isMinimized: boolean;
  onToggleMinimize: () => void;
}

export default function HandoutPanel({
  currentSubtitle,
  difficultWords,
  videoStats,
  isMinimized,
  onToggleMinimize
}: HandoutPanelProps) {
  const [selectedWord, setSelectedWord] = useState<VocabularyWord | null>(null);
  const [position, setPosition] = useState({ x: 20, y: 20 });
  const [isDragging, setIsDragging] = useState(false);

  // Auto-select first difficult word when subtitle changes
  useEffect(() => {
    if (difficultWords.length > 0) {
      setSelectedWord(difficultWords[0]);
    }
  }, [currentSubtitle]);

  // Handle drag functionality
  const handleDragStart = (e: React.MouseEvent) => {
    setIsDragging(true);
    // ... drag logic
  };

  if (isMinimized) {
    return (
      <div className="handout-panel minimized" onClick={onToggleMinimize}>
        <div className="title-bar">
          ğŸ“š è¬›ç¾©é¢æ¿ ({difficultWords.length}å€‹é›£å­—)
        </div>
      </div>
    );
  }

  return (
    <div
      className="handout-panel"
      style={{ left: position.x, top: position.y }}
    >
      <div
        className="title-bar draggable"
        onMouseDown={handleDragStart}
      >
        ğŸ“š è¬›ç¾©é¢æ¿
        <button onClick={onToggleMinimize}>â”€</button>
      </div>

      <WordList
        words={difficultWords}
        selectedWord={selectedWord}
        onSelectWord={setSelectedWord}
      />

      {selectedWord && (
        <WordDetail
          word={selectedWord}
          onAddToReviewList={() => {/* ... */}}
          onMarkAsMastered={() => {/* ... */}}
        />
      )}

      <VideoStats stats={videoStats} />
    </div>
  );
}
```

```typescript
// components/SubtitlePanel/HighlightedWord.tsx

'use client';

import { VocabularyWord } from '@/lib/vocabularyLoader';

interface HighlightedWordProps {
  word: string;
  data: VocabularyWord;
  isSelected: boolean;
  onClick: () => void;
}

export default function HighlightedWord({
  word,
  data,
  isSelected,
  onClick
}: HighlightedWordProps) {
  const getLevelClass = () => {
    if (data.level === 'hard') return 'level-hard';
    if (data.level === 'medium') return 'level-medium';
    return 'level-easy';
  };

  return (
    <span
      className={`word-highlight ${getLevelClass()} ${isSelected ? 'selected' : ''}`}
      data-definition={data.definitions[0]?.meaning_zh || ''}
      onClick={onClick}
    >
      {word}
    </span>
  );
}
```

### 3.5 ç‹€æ…‹ç®¡ç†

ä½¿ç”¨ **React Context + BroadcastChannel** åŒæ­¥è¬›ç¾©æ¨¡å¼ç‹€æ…‹ï¼š

```typescript
// contexts/HandoutModeContext.tsx

interface HandoutModeState {
  enabled: boolean;
  vocabularyType: 'toeic' | 'gsat' | 'custom';
  colorScheme: 'default' | 'blue' | 'high-contrast' | 'custom';
  panelMinimized: boolean;
  reviewList: string[]; // word IDs
}

const HandoutModeContext = createContext<{
  state: HandoutModeState;
  actions: {
    toggleEnabled: () => void;
    setVocabularyType: (type: 'toeic' | 'gsat' | 'custom') => void;
    addToReviewList: (word: string) => void;
    // ... other actions
  };
} | null>(null);

export function HandoutModeProvider({ children }: { children: React.ReactNode }) {
  const [state, setState] = useState<HandoutModeState>({
    enabled: false,
    vocabularyType: 'toeic',
    colorScheme: 'default',
    panelMinimized: false,
    reviewList: []
  });

  const broadcastChannel = useRef<BroadcastChannel | null>(null);

  useEffect(() => {
    // Initialize BroadcastChannel
    broadcastChannel.current = new BroadcastChannel('dubtitle-handout');

    // Listen for state changes from other tabs
    broadcastChannel.current.addEventListener('message', (event) => {
      if (event.data.type === 'HANDOUT_STATE_CHANGED') {
        setState(event.data.state);
      }
    });

    // Load from localStorage
    const stored = localStorage.getItem('dubtitle_handout_state');
    if (stored) {
      setState(JSON.parse(stored));
    }

    return () => {
      broadcastChannel.current?.close();
    };
  }, []);

  // Sync state changes
  useEffect(() => {
    localStorage.setItem('dubtitle_handout_state', JSON.stringify(state));
    broadcastChannel.current?.postMessage({
      type: 'HANDOUT_STATE_CHANGED',
      state
    });
  }, [state]);

  // ... actions implementation

  return (
    <HandoutModeContext.Provider value={{ state, actions }}>
      {children}
    </HandoutModeContext.Provider>
  );
}
```

---

## å››ã€å–®å­—è¡¨è³‡æ–™ä¾†æº

### 4.1 å¤šç›Šå–®å­—è¡¨

**ä¾†æºç­–ç•¥**ï¼š
1. **å…¬é–‹è³‡æº**ï¼š
   - [TOEIC Official Word List (ETS)](https://www.ets.org/toeic) - 600 Essential Words
   - [Pass the TOEIC Test](https://www.pass-the-toeic-test.com/toeic-word-list.php) - 1000 Words
   - [ExamWord TOEIC 3000](https://www.examword.com/toeic-list/3000-vocabulary-1)

2. **é›£åº¦åˆ†ç´šæ¨™æº–**ï¼š
   - **æ˜“ (Easy)**: TOEIC 0-400 åˆ†è©å½™ï¼ˆæ—¥å¸¸åŸºç¤å–®å­—ï¼‰
   - **ä¸­ (Medium)**: TOEIC 400-600 åˆ†è©å½™ï¼ˆå•†å‹™å¸¸ç”¨å–®å­—ï¼‰
   - **é›£ (Hard)**: TOEIC 600+ åˆ†è©å½™ï¼ˆé€²éšå•†å‹™/å­¸è¡“å–®å­—ï¼‰

3. **åˆ†é¡ç¶­åº¦**ï¼š
   - ä¸»é¡Œåˆ†é¡ï¼šBusiness, HR, Finance, IT, Logistics, Meetings
   - è©æ€§åˆ†é¡ï¼šNoun, Verb, Adjective, Adverb
   - é »ç‡åˆ†é¡ï¼šHigh, Medium, Low

### 4.2 å­¸æ¸¬å–®å­—è¡¨

**ä¾†æºç­–ç•¥**ï¼š
1. **å®˜æ–¹åƒè€ƒ**ï¼š
   - [å¤§è€ƒä¸­å¿ƒå…¬å¸ƒé«˜ä¸­è‹±æ–‡åƒè€ƒè©å½™è¡¨](https://www.ceec.edu.tw/)ï¼ˆLevel 1-6ï¼‰
   - 108èª²ç¶±æ ¸å¿ƒè©å½™

2. **åˆ†ç´šæ¨™æº–**ï¼š
   - **Level 1-2**: åœ‹ä¸­åŸºç¤ï¼ˆ2000 wordsï¼‰
   - **Level 3-4**: é«˜ä¸€é«˜äºŒï¼ˆ4000 wordsï¼‰
   - **Level 5-6**: é«˜ä¸‰é€²éšï¼ˆ5500 wordsï¼‰
   - **Level 7**: è¶…ç¶±è©å½™ï¼ˆé¡å¤–è£œå……ï¼‰

### 4.3 å–®å­—è¡¨å»ºç½®æµç¨‹

```bash
# å»ºç½®æ­¥é©Ÿ
1. æ”¶é›†å…¬é–‹å–®å­—è¡¨ï¼ˆCSV/TXT æ ¼å¼ï¼‰
2. ä½¿ç”¨ ChatGPT API æ‰¹æ¬¡ç”Ÿæˆçµæ§‹åŒ– JSON
3. äººå·¥å¯©æ ¸èˆ‡è£œå……ï¼ˆéŸ³æ¨™ã€ä¾‹å¥ã€åˆ†é¡ï¼‰
4. ç‰ˆæœ¬æ§åˆ¶èˆ‡å®šæœŸæ›´æ–°

# ç¯„ä¾‹ Prompt for ChatGPT
"å°‡ä»¥ä¸‹ TOEIC å–®å­—è½‰æ›ç‚º JSON æ ¼å¼ï¼ŒåŒ…å«ï¼š
- word (å–®å­—)
- level (easy/medium/hardï¼Œæ ¹æ“š TOEIC 600 Essential List åˆ¤æ–·)
- phonetic (IPA éŸ³æ¨™)
- definitions (ä¸­è‹±æ–‡å®šç¾©)
- examples (2å€‹å¯¦ç”¨ä¾‹å¥)
- collocations (å¸¸è¦‹æ­é…)
- category (ä¸»é¡Œåˆ†é¡)

å–®å­—åˆ—è¡¨ï¼š
acquisition, implement, execute..."
```

### 4.4 è³‡æ–™æª”æ¡ˆçµæ§‹

```
public/
â””â”€â”€ data/
    â””â”€â”€ vocabulary/
        â”œâ”€â”€ toeic-2025.json          # å¤šç›Šå–®å­—è¡¨ (~3000 words)
        â”œâ”€â”€ gsat-2025.json            # å­¸æ¸¬å–®å­—è¡¨ (~5500 words)
        â”œâ”€â”€ toefl-2025.json           # æ‰˜ç¦å–®å­—è¡¨ (å¯é¸)
        â”œâ”€â”€ custom-template.json      # ä½¿ç”¨è€…è‡ªè¨‚ç¯„æœ¬
        â””â”€â”€ metadata.json             # ç‰ˆæœ¬è³‡è¨Šèˆ‡çµ±è¨ˆ
```

---

## äº”ã€é€²éšåŠŸèƒ½è¨­è¨ˆ

### 5.1 åŒ¯å‡ºè¬›ç¾©åŠŸèƒ½

**åŒ¯å‡ºæ ¼å¼**ï¼š
- PDFï¼ˆé©åˆåˆ—å°ï¼‰
- Markdownï¼ˆé©åˆç­†è¨˜è»Ÿé«”ï¼‰
- Anki CSVï¼ˆé©åˆè£½ä½œå–®å­—å¡ï¼‰
- JSONï¼ˆé©åˆç¨‹å¼åŒ–è™•ç†ï¼‰

**åŒ¯å‡ºå…§å®¹**ï¼š
```markdown
# Dubtitle å½±ç‰‡è¬›ç¾©

**å½±ç‰‡è³‡è¨Š**
- æ¨™é¡Œ: [YouTube Video Title]
- å½±ç‰‡ID: dQw4w9WgXcQ
- é•·åº¦: 3:45
- ç”Ÿæˆæ™‚é–“: 2025-11-16

---

## é›£å­—çµ±è¨ˆ
- å¤šç›Šé«˜ç´š (600+): 12 å€‹
- å¤šç›Šä¸­ç´š (400-600): 25 å€‹
- å­¸æ¸¬ 6-7 ç´š: 8 å€‹

---

## è©å½™åˆ—è¡¨

### 1. acquisition â˜…â˜…â˜…
**éŸ³æ¨™**: /ËŒÃ¦kwÉªËˆzÉªÊƒÉ™n/
**è©æ€§**: n.
**å®šç¾©**: ç²å¾—ï¼›ç¿’å¾—ï¼›æ”¶è³¼

**ä¾‹å¥**:
- Language acquisition requires consistent practice.
- The company announced the acquisition of a competitor.

**å‡ºç¾æ™‚é–“è»¸**:
- 00:15 - "The rapid acquisition of language skills..."
- 01:23 - "Data acquisition is crucial for..."

---

### 2. implement â˜…â˜…â˜†
...

---

## è¤‡ç¿’æ¸…å–®
- [ ] acquisition
- [ ] implement
- [ ] execute

---

*Generated by Dubtitle Handout Mode*
```

**å¯¦ä½œ**ï¼š
```typescript
// lib/exportHandout.ts

class HandoutExporter {
  exportToPDF(videoData: VideoData, wordList: VocabularyWord[]): void {
    // Use jsPDF library
    const doc = new jsPDF();
    // ... PDF generation logic
    doc.save(`dubtitle-handout-${videoData.id}.pdf`);
  }

  exportToMarkdown(videoData: VideoData, wordList: VocabularyWord[]): string {
    let md = `# Dubtitle å½±ç‰‡è¬›ç¾©\n\n`;
    md += `**å½±ç‰‡è³‡è¨Š**\n`;
    md += `- æ¨™é¡Œ: ${videoData.title}\n`;
    // ... build markdown
    return md;
  }

  exportToAnki(wordList: VocabularyWord[]): string {
    // CSV format for Anki import
    const csv = wordList.map(word =>
      `"${word.word}","${word.phonetic}","${word.definitions[0].meaning_zh}","${word.examples[0]}"`
    ).join('\n');

    return `Front,Phonetic,Back,Example\n${csv}`;
  }
}
```

### 5.2 è¤‡ç¿’æ¸…å–®ç®¡ç†

**åŠŸèƒ½**ï¼š
- é»æ“Šã€ŒåŠ å…¥è¤‡ç¿’æ¸…å–®ã€å°‡å–®å­—åŠ å…¥å¾…è¤‡ç¿’åˆ—è¡¨
- åœ¨è¬›ç¾©é¢æ¿åº•éƒ¨é¡¯ç¤ºè¤‡ç¿’æ¸…å–®
- æ”¯æ´æ‰¹æ¬¡åŒ¯å‡ºè¤‡ç¿’æ¸…å–®
- æ•´åˆ Spaced Repetition æ¼”ç®—æ³•ï¼ˆæœªä¾†æ“´å±•ï¼‰

**è³‡æ–™çµæ§‹**ï¼š
```typescript
interface ReviewItem {
  word: string;
  addedAt: Date;
  reviewCount: number;
  lastReviewed: Date | null;
  mastered: boolean;
  sourceVideo: {
    id: string;
    title: string;
    timestamp: number;
  };
}

// å„²å­˜æ–¼ localStorage æˆ– Supabase
interface ReviewList {
  items: ReviewItem[];
  totalWords: number;
  masteredWords: number;
}
```

### 5.3 è‡ªè¨‚å–®å­—è¡¨ä¸Šå‚³

**UI æµç¨‹**ï¼š
```
1. ä½¿ç”¨è€…é»æ“Šã€Œè‡ªè¨‚å–®å­—è¡¨ã€é¸é …
2. ä¸Šå‚³ JSON æª”æ¡ˆï¼ˆéœ€ç¬¦åˆ Schemaï¼‰
3. ç³»çµ±é©—è­‰æ ¼å¼
4. å„²å­˜è‡³ localStorage æˆ– Supabase
5. åˆ‡æ›è‡³è‡ªè¨‚å–®å­—è¡¨æ¨¡å¼
```

**Schema é©—è­‰**ï¼š
```typescript
// lib/vocabularyValidator.ts

import Ajv from 'ajv';

const vocabularySchema = {
  type: 'object',
  properties: {
    words: {
      type: 'array',
      items: {
        type: 'object',
        required: ['word', 'level', 'definitions'],
        properties: {
          word: { type: 'string' },
          level: { enum: ['easy', 'medium', 'hard'] },
          phonetic: { type: 'string' },
          definitions: { type: 'array' },
          examples: { type: 'array' }
        }
      }
    }
  }
};

export function validateVocabulary(data: any): boolean {
  const ajv = new Ajv();
  const validate = ajv.compile(vocabularySchema);
  return validate(data);
}
```

### 5.4 é›£å­—çµ±è¨ˆé¢æ¿

åœ¨ Player Page å³ä¸‹è§’æ–°å¢çµ±è¨ˆæµ®çª—ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æœ¬å½±ç‰‡é›£å­—çµ±è¨ˆ       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”´ é«˜é›£åº¦ (â˜…â˜…â˜…): 12   â”‚
â”‚ ğŸŸ  ä¸­é›£åº¦ (â˜…â˜…â˜†): 25   â”‚
â”‚ ğŸŸ¢ ä½é›£åº¦ (â˜…â˜†â˜†): 8    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¸½è¨ˆ: 45 å€‹é›£å­—         â”‚
â”‚ å¯†åº¦: 3.2 å€‹/åˆ†é˜       â”‚
â”‚                        â”‚
â”‚ å»ºè­°å­¸ç¿’æ™‚é–“: 45 åˆ†é˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€å¯¦è¸é›£æ˜“åº¦è©•ä¼°

### 6.1 æŠ€è¡“é›£åº¦è©•åˆ†

| åŠŸèƒ½æ¨¡çµ„ | é›£åº¦ | èªªæ˜ |
|---------|------|------|
| å–®å­—è¡¨è¼‰å…¥èˆ‡è§£æ | 2/10 | åŸºç¤ JSON è™•ç† |
| å­—å¹•æ–‡å­—åŒ¹é…æ¼”ç®—æ³• | 4/10 | Regex + Hash Mapï¼Œé‚è¼¯æ¸…æ™° |
| é›£å­—æ¨™è¨˜ UI å¯¦ä½œ | 5/10 | CSS + React ç‹€æ…‹ç®¡ç† |
| è¬›ç¾©é¢æ¿æ‹–æ›³åŠŸèƒ½ | 6/10 | éœ€è™•ç†æ»‘é¼ äº‹ä»¶èˆ‡é‚Šç•Œæª¢æ¸¬ |
| å­—å…¸ API æ•´åˆ | 3/10 | ç°¡å–® API ä¸²æ¥ + éŒ¯èª¤è™•ç† |
| TTS ç™¼éŸ³åŠŸèƒ½ | 2/10 | ç€è¦½å™¨å…§å»º API |
| åŒ¯å‡ºè¬›ç¾© (PDF) | 7/10 | éœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹åº« (jsPDF) |
| åŒ¯å‡ºè¬›ç¾© (Markdown) | 3/10 | å­—ä¸²æ‹¼æ¥ |
| è¤‡ç¿’æ¸…å–®ç®¡ç† | 4/10 | localStorage CRUD |
| é›™è¦–çª—ç‹€æ…‹åŒæ­¥ | 6/10 | BroadcastChannelï¼ˆå·²æœ‰å¯¦ä½œç¶“é©—ï¼‰|
| è‡ªè¨‚å–®å­—è¡¨ä¸Šå‚³ | 5/10 | æª”æ¡ˆé©—è­‰ + Schema æª¢æŸ¥ |

**æ•´é«”å¹³å‡é›£åº¦**: **4.7/10**

### 6.2 é›£åº¦åˆ†æ

**å®¹æ˜“çš„éƒ¨åˆ†**ï¼š
- å–®å­—è¡¨è³‡æ–™çµæ§‹è¨­è¨ˆï¼ˆJSON æ ¼å¼æ¸…æ™°ï¼‰
- åŸºç¤ UI çµ„ä»¶å¯¦ä½œï¼ˆå·²æœ‰æˆç†Ÿçš„ Tailwind CSSï¼‰
- å­—å…¸ API ä¸²æ¥ï¼ˆFree Dictionary API æ–‡ä»¶å®Œå–„ï¼‰

**ä¸­ç­‰é›£åº¦çš„éƒ¨åˆ†**ï¼š
- æ–‡å­—åŒ¹é…æ¼”ç®—æ³•æ•ˆèƒ½å„ªåŒ–ï¼ˆéœ€è€ƒæ…®å¿«å–èˆ‡åˆ†è©ç­–ç•¥ï¼‰
- è¬›ç¾©é¢æ¿äº’å‹•é«”é©—ï¼ˆæ‹–æ›³ã€æ‘ºç–Šã€é¸ä¸­åŒæ­¥ï¼‰
- é›£å­—é«˜äº®çš„ CSS è¨­è¨ˆï¼ˆéœ€å¹³è¡¡ç¾è§€èˆ‡å¯è®€æ€§ï¼‰

**å…·æŒ‘æˆ°æ€§çš„éƒ¨åˆ†**ï¼š
- PDF åŒ¯å‡ºæ’ç‰ˆï¼ˆéœ€ç†Ÿæ‚‰ jsPDF æˆ– puppeteerï¼‰
- å¤§é‡å­—å¹•çš„å³æ™‚è™•ç†æ•ˆèƒ½ï¼ˆéœ€é¿å… UI å¡é “ï¼‰
- è‡ªè¨‚å–®å­—è¡¨çš„ Schema é©—è­‰èˆ‡éŒ¯èª¤æç¤º

---

## ä¸ƒã€é–‹ç™¼æ™‚ç¨‹é ä¼°

### 7.1 MVP ç‰ˆæœ¬ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

| éšæ®µ | ä»»å‹™ | é ä¼°æ™‚é–“ | è² è²¬äººå“¡ |
|-----|------|---------|---------|
| **Phase 1: è³‡æ–™æº–å‚™** | | **8 å°æ™‚** | |
| 1.1 | æ”¶é›†å¤šç›Š/å­¸æ¸¬å–®å­—è¡¨ | 2h | Agent-3 |
| 1.2 | å»ºç«‹ JSON Schema èˆ‡ç¯„ä¾‹è³‡æ–™ | 2h | Agent-3 |
| 1.3 | ä½¿ç”¨ ChatGPT æ‰¹æ¬¡ç”Ÿæˆå–®å­—è¡¨ | 3h | Agent-3 |
| 1.4 | äººå·¥å¯©æ ¸èˆ‡è£œå……ï¼ˆå‰100å€‹å–®å­—ï¼‰| 1h | Agent-3 |
| **Phase 2: æ ¸å¿ƒåŠŸèƒ½** | | **16 å°æ™‚** | |
| 2.1 | VocabularyLoader å¯¦ä½œ | 3h | Developer |
| 2.2 | SubtitleProcessor åŒ¹é…æ¼”ç®—æ³• | 4h | Developer |
| 2.3 | HighlightedWord çµ„ä»¶ + CSS | 3h | Developer |
| 2.4 | HandoutPanel åŸºç¤çµæ§‹ | 4h | Developer |
| 2.5 | ç‹€æ…‹ç®¡ç† (Context + BroadcastChannel) | 2h | Developer |
| **Phase 3: UI/UX** | | **12 å°æ™‚** | |
| 3.1 | è¬›ç¾©é¢æ¿æ‹–æ›³åŠŸèƒ½ | 4h | Developer |
| 3.2 | é›£å­—åˆ—è¡¨èˆ‡è©³æƒ…å¡ç‰‡ | 3h | Developer |
| 3.3 | Tooltip èˆ‡ Hover æ•ˆæœ | 2h | Developer |
| 3.4 | éŸ¿æ‡‰å¼è¨­è¨ˆèª¿æ•´ | 3h | Developer |
| **Phase 4: æ•´åˆæ¸¬è©¦** | | **8 å°æ™‚** | |
| 4.1 | åŠŸèƒ½æ¸¬è©¦èˆ‡ Bug ä¿®å¾© | 4h | Developer |
| 4.2 | æ•ˆèƒ½å„ªåŒ–ï¼ˆå¿«å–ã€lazy loadingï¼‰| 2h | Developer |
| 4.3 | è·¨ç€è¦½å™¨æ¸¬è©¦ | 2h | QA |

**MVP ç¸½è¨ˆ**: **44 å°æ™‚ â‰ˆ 5.5 å·¥ä½œå¤©**

### 7.2 å®Œæ•´ç‰ˆæœ¬ï¼ˆå«é€²éšåŠŸèƒ½ï¼‰

| éšæ®µ | ä»»å‹™ | é ä¼°æ™‚é–“ |
|-----|------|---------|
| **Phase 5: å­—å…¸æ•´åˆ** | | **10 å°æ™‚** |
| 5.1 | Free Dictionary API æ•´åˆ | 3h |
| 5.2 | TTS ç™¼éŸ³åŠŸèƒ½ | 2h |
| 5.3 | éŒ¯èª¤è™•ç†èˆ‡é™ç´šæ–¹æ¡ˆ | 2h |
| 5.4 | éŸ³æ¨™é¡¯ç¤ºèˆ‡æ ¼å¼åŒ– | 1h |
| 5.5 | ä¾‹å¥èˆ‡æ­é…è©å±•ç¤º | 2h |
| **Phase 6: é€²éšåŠŸèƒ½** | | **16 å°æ™‚** |
| 6.1 | åŒ¯å‡ºè¬›ç¾© (Markdown) | 3h |
| 6.2 | åŒ¯å‡ºè¬›ç¾© (PDF) | 6h |
| 6.3 | åŒ¯å‡º Anki CSV | 2h |
| 6.4 | è¤‡ç¿’æ¸…å–®ç®¡ç† | 3h |
| 6.5 | è‡ªè¨‚å–®å­—è¡¨ä¸Šå‚³ | 2h |
| **Phase 7: å„ªåŒ–èˆ‡æ–‡æª”** | | **10 å°æ™‚** |
| 7.1 | æ•ˆèƒ½å„ªåŒ–ï¼ˆè™›æ“¬æ»¾å‹•ã€Web Workerï¼‰| 4h |
| 7.2 | ä½¿ç”¨è€…æ–‡æª”æ’°å¯« | 3h |
| 7.3 | é–‹ç™¼è€…æ–‡æª”æ›´æ–° | 2h |
| 7.4 | ä¸Šç·šæº–å‚™èˆ‡éƒ¨ç½² | 1h |

**å®Œæ•´ç‰ˆç¸½è¨ˆ**: **80 å°æ™‚ â‰ˆ 10 å·¥ä½œå¤©**

### 7.3 é–‹ç™¼é‡Œç¨‹ç¢‘

```
Week 1 (5 days)
â”œâ”€ Day 1-2: Phase 1 è³‡æ–™æº–å‚™ + Phase 2.1-2.2
â”œâ”€ Day 3-4: Phase 2.3-2.5 æ ¸å¿ƒåŠŸèƒ½
â””â”€ Day 5: Phase 3.1-3.2 åŸºç¤ UI

Week 2 (5 days)
â”œâ”€ Day 1-2: Phase 3.3-3.4 UI å®Œå–„ + Phase 4 æ¸¬è©¦
â”œâ”€ Day 3: Phase 5 å­—å…¸æ•´åˆ
â”œâ”€ Day 4: Phase 6.1-6.3 åŒ¯å‡ºåŠŸèƒ½
â””â”€ Day 5: Phase 6.4-6.5 + Phase 7 å„ªåŒ–

Total: 10 å·¥ä½œå¤© (2é€±)
```

---

## å…«ã€æŠ€è¡“å‰µæ–°äº®é»

### 8.1 æ•™è‚²å¿ƒç†å­¸æ•´åˆ

1. **è¦–è¦ºæ³¨æ„åŠ›å¼•å°**
   - ä½¿ç”¨é¡è‰²èˆ‡åº•ç·šæ¨£å¼å¼•å°å­¸ç¿’è€…æ³¨æ„é«˜åƒ¹å€¼è©å½™
   - é¿å…éåº¦æ¨™è¨˜é€ æˆèªçŸ¥è² è·ï¼ˆcognitive overloadï¼‰

2. **èªå¢ƒåŒ–å­¸ç¿’ (Contextual Learning)**
   - åœ¨çœŸå¯¦å½±ç‰‡èªå¢ƒä¸­å­¸ç¿’å–®å­—ï¼Œè€Œéå­¤ç«‹èƒŒèª¦
   - ç¬¦åˆ Input Hypothesisï¼ˆStephen Krashenï¼‰ç†è«–

3. **å³æ™‚å›é¥‹æ©Ÿåˆ¶**
   - Hover é¡¯ç¤ºå®šç¾©ï¼Œé™ä½æŸ¥å­—å…¸é–€æª»
   - é»æ“Šå±•é–‹è©³ç´°è³‡è¨Šï¼Œæ»¿è¶³æ·±åº¦å­¸ç¿’éœ€æ±‚

### 8.2 æ•ˆèƒ½å„ªåŒ–å‰µæ–°

1. **æ¼¸é€²å¼è¼‰å…¥ (Progressive Loading)**
   ```typescript
   // å„ªå…ˆè¼‰å…¥å¸¸ç”¨å–®å­—ï¼ˆå‰1000å€‹ï¼‰
   // èƒŒæ™¯è¼‰å…¥å®Œæ•´å–®å­—è¡¨
   async loadVocabularyProgressive() {
     // Load essential words first
     await this.loadEssentialWords(); // 1000 words, ~100ms

     // Load full dictionary in background
     requestIdleCallback(() => {
       this.loadFullDictionary(); // 3000 words, ~300ms
     });
   }
   ```

2. **Web Worker è™•ç†**
   ```typescript
   // å°‡å­—å¹•åŒ¹é…é‹ç®—ç§»è‡³ Web Worker
   // é¿å…é˜»å¡ UI ä¸»åŸ·è¡Œç·’
   const worker = new Worker('/workers/subtitle-processor.js');
   worker.postMessage({ subtitles, vocabulary });
   worker.onmessage = (e) => {
     setProcessedSubtitles(e.data);
   };
   ```

3. **è™›æ“¬æ»¾å‹• (Virtual Scrolling)**
   - è¬›ç¾©é¢æ¿é¡¯ç¤ºå¤§é‡å–®å­—æ™‚ï¼Œä½¿ç”¨ react-window è™›æ“¬åŒ–
   - åªæ¸²æŸ“å¯è¦‹å€åŸŸï¼Œæå‡æ•ˆèƒ½

### 8.3 ä½¿ç”¨è€…é«”é©—å‰µæ–°

1. **æ™ºæ…§é›£åº¦èª¿æ•´**
   ```typescript
   // æ ¹æ“šä½¿ç”¨è€…æ¨™è¨˜ã€Œå·²æŒæ¡ã€çš„å–®å­—ï¼Œå‹•æ…‹èª¿æ•´é›£åº¦é–¾å€¼
   class AdaptiveDifficulty {
     adjustThreshold(masteredWords: string[]): number {
       const avgLevel = this.calculateAverageLevel(masteredWords);
       // å¦‚æœä½¿ç”¨è€…å·²æŒæ¡å¾ˆå¤šé«˜é›£åº¦å­—ï¼Œè‡ªå‹•æé«˜æ¨™è¨˜é–€æª»
       return avgLevel > 600 ? 650 : 600;
     }
   }
   ```

2. **ä¸€éµç”Ÿæˆå­¸ç¿’è¨ˆç•«**
   ```
   [ç”Ÿæˆå­¸ç¿’è¨ˆç•«] æŒ‰éˆ•
   â†’ åˆ†ææœ¬å½±ç‰‡é›£å­—
   â†’ å»ºè­°å­¸ç¿’é †åºï¼ˆå…ˆä¸­ç­‰é›£åº¦ï¼Œå†é«˜é›£åº¦ï¼‰
   â†’ ä¼°ç®—å­¸ç¿’æ™‚é–“
   â†’ ç”Ÿæˆ Markdown checklist
   ```

3. **ç¤¾äº¤åˆ†äº«åŠŸèƒ½**
   ```
   [åˆ†äº«æˆ‘çš„å­¸ç¿’æˆæœ]
   â†’ ç”Ÿæˆåœ–ç‰‡ï¼šã€Œæˆ‘åœ¨ Dubtitle å­¸æœƒäº† 45 å€‹å¤šç›Šå–®å­—ï¼ã€
   â†’ åŒ…å«çµ±è¨ˆåœ–è¡¨
   â†’ ä¸€éµåˆ†äº«è‡³ç¤¾ç¾¤åª’é«”
   ```

---

## ä¹ã€é¢¨éšªè©•ä¼°èˆ‡æ‡‰å°

### 9.1 æŠ€è¡“é¢¨éšª

| é¢¨éšª | æ©Ÿç‡ | å½±éŸ¿ | æ‡‰å°ç­–ç•¥ |
|-----|------|------|---------|
| å–®å­—è¡¨è³‡æ–™å“è³ªä¸ä½³ | ä¸­ | é«˜ | äººå·¥å¯©æ ¸å‰100å€‹é«˜é »å­—ï¼Œå»ºç«‹å“è³ªæ¨™æº– |
| åŒ¹é…æ¼”ç®—æ³•æ•ˆèƒ½å•é¡Œ | ä½ | ä¸­ | ä½¿ç”¨ Web Workerï¼Œå¿«å–è™•ç†çµæœ |
| å­—å…¸ API é™æµ/å¤±æ•ˆ | ä¸­ | ä¸­ | æœ¬åœ°å–®å­—è¡¨ç‚ºä¸»ï¼ŒAPI ç‚ºè¼”ï¼›å¤šå€‹å‚™æ´ API |
| PDF åŒ¯å‡ºæ’ç‰ˆå•é¡Œ | ä¸­ | ä½ | å„ªå…ˆå¯¦ä½œ Markdownï¼ŒPDF ä½œç‚ºé€²éšåŠŸèƒ½ |
| è·¨ç€è¦½å™¨ç›¸å®¹æ€§ | ä½ | ä½ | ä½¿ç”¨æˆç†Ÿåº«ï¼ˆpolyfillï¼‰ï¼Œæ¸¬è©¦ä¸»æµç€è¦½å™¨ |

### 9.2 ä½¿ç”¨è€…é«”é©—é¢¨éšª

| é¢¨éšª | æ©Ÿç‡ | å½±éŸ¿ | æ‡‰å°ç­–ç•¥ |
|-----|------|------|---------|
| è¬›ç¾©é¢æ¿é®æ“‹å­—å¹• | é«˜ | é«˜ | å¯æ‹–æ›³ã€å¯æ‘ºç–Šã€é€æ˜åº¦èª¿æ•´ |
| éå¤šæ¨™è¨˜å¹²æ“¾è§€çœ‹ | ä¸­ | é«˜ | æä¾›ã€Œæ¸›å°‘æ¨™è¨˜ã€æ¨¡å¼ï¼Œåªæ¨™è¨˜é«˜é›£åº¦å­— |
| é›£åº¦åˆ†ç´šä¸æº–ç¢º | ä¸­ | ä¸­ | å…è¨±ä½¿ç”¨è€…æ‰‹å‹•èª¿æ•´ï¼Œæ”¶é›†åé¥‹è¿­ä»£ |
| å­¸ç¿’æ›²ç·šé™¡å³­ | ä½ | ä¸­ | æä¾›æ–°æ‰‹å¼•å° (Onboarding Tutorial) |

### 9.3 è³‡æ–™éš±ç§é¢¨éšª

| é¢¨éšª | æ©Ÿç‡ | å½±éŸ¿ | æ‡‰å°ç­–ç•¥ |
|-----|------|------|---------|
| è¤‡ç¿’æ¸…å–®è³‡æ–™éºå¤± | ä½ | ä¸­ | localStorage + Supabase é›²ç«¯å‚™ä»½ |
| ä½¿ç”¨è€…è³‡æ–™å¤–æ´© | æ¥µä½ | é«˜ | ç„¡é ˆç™»å…¥å³å¯ä½¿ç”¨ï¼Œè³‡æ–™å„²å­˜æœ¬åœ° |

---

## åã€æˆåŠŸæŒ‡æ¨™ (KPI)

### 10.1 åŠŸèƒ½æ€§æŒ‡æ¨™

- [ ] å–®å­—åŒ¹é…æº–ç¢ºç‡ > 95%
- [ ] å­—å¹•è™•ç†é€Ÿåº¦ < 1ç§’ï¼ˆ1000å¥å­—å¹•ï¼‰
- [ ] è¬›ç¾©é¢æ¿è¼‰å…¥æ™‚é–“ < 500ms
- [ ] å­—å…¸ API å›æ‡‰æ™‚é–“ < 2ç§’

### 10.2 ä½¿ç”¨è€…é«”é©—æŒ‡æ¨™

- [ ] æ–°ä½¿ç”¨è€…å®Œæˆé¦–æ¬¡ä½¿ç”¨ < 3åˆ†é˜
- [ ] è¬›ç¾©æ¨¡å¼å•Ÿç”¨ç‡ > 30%ï¼ˆç›¸å°æ–¼ç¸½ä½¿ç”¨è€…ï¼‰
- [ ] åŒ¯å‡ºè¬›ç¾©åŠŸèƒ½ä½¿ç”¨ç‡ > 10%
- [ ] è¤‡ç¿’æ¸…å–®å¹³å‡å–®å­—æ•¸ > 15å€‹

### 10.3 æ•™è‚²æˆæ•ˆæŒ‡æ¨™ï¼ˆé•·æœŸï¼‰

- [ ] ä½¿ç”¨è€…å›å ±ã€Œæœ‰æ•ˆå­¸ç¿’å–®å­—ã€æ»¿æ„åº¦ > 4.0/5.0
- [ ] é‡è¤‡è§€çœ‹å«é›£å­—ç‰‡æ®µçš„æ¯”ä¾‹ > 40%
- [ ] ä½¿ç”¨è€…è‡ªä¸»æ¨™è¨˜ã€Œå·²æŒæ¡ã€å–®å­—æ•¸ > 20å€‹/é€±

---

## åä¸€ã€æœªä¾†æ“´å±•æ–¹å‘

### 11.1 AI è¼”åŠ©åŠŸèƒ½

1. **æ™ºæ…§ä¾‹å¥ç”Ÿæˆ**
   - ä½¿ç”¨ GPT-4 æ ¹æ“šå½±ç‰‡ä¸»é¡Œï¼Œç‚ºé›£å­—ç”Ÿæˆç›¸é—œä¾‹å¥
   - ä¾‹ï¼šå½±ç‰‡ä¸»é¡Œæ˜¯ç§‘æŠ€ â†’ ä¾‹å¥åå‘ç§‘æŠ€é ˜åŸŸ

2. **å€‹äººåŒ–å–®å­—æ¨è–¦**
   - åˆ†æä½¿ç”¨è€…å·²æŒæ¡å–®å­—ï¼Œæ¨è–¦ç›¸é—œè©å½™
   - ä¾‹ï¼šå·²æŒæ¡ "acquire" â†’ æ¨è–¦ "acquisition", "acquirable"

3. **è‡ªå‹•ç”Ÿæˆè¤‡ç¿’é¡Œ**
   - æ ¹æ“šé›£å­—åˆ—è¡¨ï¼Œç”Ÿæˆå¡«ç©ºé¡Œã€é¸æ“‡é¡Œ
   - æ•´åˆè‡³è¬›ç¾©é¢æ¿ä¸‹æ–¹ï¼Œå³æ™‚è‡ªæ¸¬

### 11.2 å¤šèªè¨€æ”¯æ´

- æ”¯æ´ä¸­è‹±ã€æ—¥è‹±ã€éŸ“è‹±ç­‰é›™èªå­—å¹•
- å¤šèªè¨€é›£å­—æ¨™è¨˜ï¼ˆæ“´å±•è‡³æ—¥èª JLPTã€éŸ“èª TOPIKï¼‰

### 11.3 å”ä½œå­¸ç¿’åŠŸèƒ½

- ä½¿ç”¨è€…å¯åˆ†äº«è‡ªè¨‚å–®å­—è¡¨
- ç¤¾ç¾¤æŠ•ç¥¨ã€Œæœ€æœ‰ç”¨çš„é›£å­—æ¨™è¨˜ã€
- æ•´åˆè¨è«–å€ï¼Œé‡å°ç‰¹å®šå–®å­—è¨è«–

### 11.4 æ•´åˆ Spaced Repetition System (SRS)

- ä½¿ç”¨ Anki æ¼”ç®—æ³•ï¼Œè¨ˆç®—è¤‡ç¿’æ™‚é–“
- æ¨æ’­æé†’ï¼šã€Œä½ æœ‰ 5 å€‹å–®å­—éœ€è¦è¤‡ç¿’ã€
- æ•´åˆè‡³è¤‡ç¿’æ¸…å–®ï¼Œè‡ªå‹•æ’ç¨‹

---

## åäºŒã€ç¸½çµ

### 12.1 æ ¸å¿ƒåƒ¹å€¼

è¬›ç¾©æ¨¡å¼å°‡ Dubtitle å¾ã€Œå­—å¹•é¡¯ç¤ºå·¥å…·ã€å‡ç´šç‚ºã€Œæ™ºæ…§å­¸ç¿’å¹³å°ã€ï¼Œå…·å‚™ä»¥ä¸‹æ ¸å¿ƒåƒ¹å€¼ï¼š

1. **æ•™è‚²æ€§**: åŸºæ–¼ 2025 å¹´èªè¨€å­¸ç¿’ç ”ç©¶ï¼Œæ¡ç”¨é›™å­—å¹•ã€é‡è¤‡è§€çœ‹ã€è¼¸å‡ºå°å‘ç­‰æœ€ä½³å¯¦è¸
2. **å¯¦ç”¨æ€§**: å³æ™‚æ¨™è¨˜ã€ä¸€éµåŒ¯å‡ºã€è¤‡ç¿’ç®¡ç†ï¼Œæ»¿è¶³è€ƒè©¦èˆ‡è‡ªå­¸éœ€æ±‚
3. **å‰µæ–°æ€§**: å½±ç‰‡ + é›£å­—æ¨™è¨˜ + è¬›ç¾©é¢æ¿ï¼Œå‰µé€ ç¨ç‰¹çš„ã€Œå½±ç‰‡å¼èªå¢ƒå­¸ç¿’ã€é«”é©—
4. **å¯æ“´å±•æ€§**: æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œæ˜“æ–¼æ–°å¢å¤šèªè¨€ã€AI è¼”åŠ©ã€å”ä½œå­¸ç¿’ç­‰åŠŸèƒ½

### 12.2 æŠ€è¡“å¯è¡Œæ€§

- **æ•´é«”é›£åº¦**: 4.7/10ï¼ˆä¸­ç­‰åæ˜“ï¼‰
- **é–‹ç™¼æ™‚ç¨‹**: 10 å·¥ä½œå¤©ï¼ˆ2é€±ï¼‰
- **æŠ€è¡“é¢¨éšª**: ä½ï¼ˆä½¿ç”¨æˆç†ŸæŠ€è¡“æ£§ï¼Œç„¡è¤‡é›œæ¼”ç®—æ³•ï¼‰
- **æ•ˆèƒ½è¡¨ç¾**: å„ªï¼ˆHash Map æŸ¥è©¢ O(1)ï¼Œå¿«å–æ©Ÿåˆ¶ï¼ŒWeb Workerï¼‰

### 12.3 å»ºè­°å¯¦æ–½è·¯ç·š

**æ¨è–¦æ¡ç”¨ã€ŒMVP â†’ è¿­ä»£ã€ç­–ç•¥**ï¼š

1. **ç¬¬ä¸€ç‰ˆ (MVP)**:
   - å¤šç›Šå–®å­—è¡¨ï¼ˆ1000å€‹æ ¸å¿ƒå­—ï¼‰
   - åŸºç¤é›£å­—æ¨™è¨˜ï¼ˆä¸‰ç´šé¡è‰²ï¼‰
   - ç°¡æ˜“è¬›ç¾©é¢æ¿ï¼ˆé›£å­—åˆ—è¡¨ + å®šç¾©ï¼‰
   - Markdown åŒ¯å‡º

2. **ç¬¬äºŒç‰ˆ (Enhanced)**:
   - å­¸æ¸¬å–®å­—è¡¨
   - å­—å…¸ API æ•´åˆ
   - TTS ç™¼éŸ³
   - è¤‡ç¿’æ¸…å–®ç®¡ç†

3. **ç¬¬ä¸‰ç‰ˆ (Advanced)**:
   - PDF åŒ¯å‡º
   - è‡ªè¨‚å–®å­—è¡¨
   - æ™ºæ…§é›£åº¦èª¿æ•´
   - çµ±è¨ˆé¢æ¿

### 12.4 æœ€çµ‚å»ºè­°

ä½œç‚ºæ•™è‚²æŠ€è¡“å°ˆå®¶ï¼Œæˆ‘å¼·çƒˆå»ºè­°å¯¦æ–½æ­¤åŠŸèƒ½ï¼Œç†ç”±å¦‚ä¸‹ï¼š

1. **å¸‚å ´éœ€æ±‚æ˜ç¢º**: å¤šç›Š/å­¸æ¸¬è€ƒç”Ÿã€è‹±èªå­¸ç¿’è€…æ•¸é‡é¾å¤§
2. **ç«¶çˆ­å„ªå‹¢é¡¯è‘—**: ç›®å‰å°‘æœ‰å·¥å…·çµåˆå½±ç‰‡å­—å¹•èˆ‡è©å½™å­¸ç¿’
3. **æŠ€è¡“å¯¦ç¾ç°¡å–®**: ç„¡éœ€è¤‡é›œ AI/MLï¼Œä½¿ç”¨åŸºç¤å‰ç«¯æŠ€è¡“å³å¯
4. **ä½¿ç”¨è€…åƒ¹å€¼é«˜**: è§£æ±ºã€Œçœ‹å½±ç‰‡å­¸è‹±èªï¼Œå»ä¸çŸ¥é“å“ªäº›å­—è©²å­¸ã€çš„ç—›é»

**ç«‹å³é–‹å§‹ï¼Œå¾ MVP åšèµ·ï¼**

---

## é™„éŒ„

### A. åƒè€ƒè³‡æ–™

1. **å­¸è¡“ç ”ç©¶**:
   - "Vocabulary learning through dual-subtitled videos" (Cambridge Core, 2025)
   - "Incidental Vocabulary Learning From Bilingual Subtitled Viewing" (Wiley, 2022)

2. **å–®å­—è¡¨ä¾†æº**:
   - [Pass the TOEIC Test - 1000 Words](https://www.pass-the-toeic-test.com/toeic-word-list.php)
   - [ExamWord TOEIC 3000](https://www.examword.com/toeic-list/3000-vocabulary-1)
   - [å¤§è€ƒä¸­å¿ƒé«˜ä¸­è‹±æ–‡åƒè€ƒè©å½™è¡¨](https://www.ceec.edu.tw/)

3. **æŠ€è¡“æ–‡ä»¶**:
   - [Free Dictionary API](https://dictionaryapi.dev/)
   - [Web Speech API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API)
   - [jsPDF Documentation](https://github.com/parallax/jsPDF)

### B. ç¯„ä¾‹è³‡æ–™

#### B.1 å¤šç›Šå–®å­—è¡¨ç¯„ä¾‹ (JSON)

```json
{
  "vocabulary": {
    "toeic": {
      "version": "2025.1",
      "lastUpdated": "2025-11-16",
      "totalWords": 3000,
      "words": [
        {
          "id": "toeic_001",
          "word": "acquisition",
          "level": "hard",
          "score": 650,
          "phonetic": "/ËŒÃ¦kwÉªËˆzÉªÊƒÉ™n/",
          "definitions": [
            {
              "partOfSpeech": "noun",
              "meaning_zh": "ç²å¾—ï¼›ç¿’å¾—ï¼›æ”¶è³¼",
              "meaning_en": "the act of acquiring something"
            }
          ],
          "examples": [
            "Language acquisition requires consistent practice.",
            "The company announced the acquisition of a competitor."
          ],
          "collocations": [
            "language acquisition",
            "data acquisition",
            "acquisition cost"
          ],
          "frequency": "high",
          "category": ["business", "academic"],
          "synonyms": ["purchase", "attainment", "procurement"],
          "tags": ["formal", "academic"]
        },
        {
          "id": "toeic_002",
          "word": "implement",
          "level": "medium",
          "score": 550,
          "phonetic": "/ËˆÉªmplÉªment/",
          "definitions": [
            {
              "partOfSpeech": "verb",
              "meaning_zh": "å¯¦æ–½ï¼›åŸ·è¡Œ",
              "meaning_en": "to put a plan into action"
            },
            {
              "partOfSpeech": "noun",
              "meaning_zh": "å·¥å…·ï¼›å™¨å…·",
              "meaning_en": "a tool or instrument"
            }
          ],
          "examples": [
            "We need to implement the new policy next week.",
            "The gardener used various implements for planting."
          ],
          "collocations": [
            "implement a strategy",
            "implement changes",
            "farming implement"
          ],
          "frequency": "high",
          "category": ["business", "general"],
          "synonyms": ["execute", "carry out", "tool"],
          "tags": ["formal", "common"]
        }
      ]
    }
  }
}
```

### C. UI Mockup è©³ç´°åœ–

```
å®Œæ•´ä½¿ç”¨è€…æµç¨‹:

1. ä½¿ç”¨è€…åœ¨ Player Page è¼¸å…¥ YouTube é€£çµ
   â””â”€> ç³»çµ±è¼‰å…¥å½±ç‰‡èˆ‡å­—å¹•

2. ä½¿ç”¨è€…é–‹å•Ÿã€Œè¬›ç¾©æ¨¡å¼ã€
   â””â”€> æ§åˆ¶é¢æ¿: [âœ“] Enable Handout Mode
   â””â”€> é¸æ“‡é›£åº¦: [å¤šç›Š â–¾]
   â””â”€> é¸æ“‡é¡è‰²: [Default â–¾]

3. å­—å¹•é¡¯ç¤ºæ™‚ï¼Œé›£å­—è‡ªå‹•é«˜äº®
   â””â”€> æ»‘é¼  Hover é¡¯ç¤ºç°¡çŸ­å®šç¾©
   â””â”€> é»æ“Šå–®å­—ï¼Œè¬›ç¾©é¢æ¿é¡¯ç¤ºè©³ç´°è³‡è¨Š

4. è¬›ç¾©é¢æ¿å±•é–‹
   â””â”€> é¡¯ç¤ºç•¶å‰å¥å­æ‰€æœ‰é›£å­—
   â””â”€> é¸ä¸­å–®å­—é¡¯ç¤ºå®Œæ•´è³‡è¨Šï¼ˆéŸ³æ¨™ã€å®šç¾©ã€ä¾‹å¥ï¼‰
   â””â”€> é»æ“Šã€ŒğŸ”Šã€æ’­æ”¾ç™¼éŸ³

5. ä½¿ç”¨è€…äº’å‹•
   â””â”€> [+ åŠ å…¥è¤‡ç¿’æ¸…å–®] â†’ å–®å­—åŠ å…¥è¤‡ç¿’åˆ—è¡¨
   â””â”€> [å·²æŒæ¡ âœ“] â†’ å–®å­—ä¸å†æ¨™è¨˜
   â””â”€> [åŒ¯å‡ºæœ¬å½±ç‰‡è¬›ç¾©] â†’ ä¸‹è¼‰ Markdown/PDF

6. è·¨è¦–çª—åŒæ­¥
   â””â”€> Player Page é–‹å•Ÿè¬›ç¾©æ¨¡å¼
   â””â”€> Subtitle Page è‡ªå‹•åŒæ­¥è¨­å®š
   â””â”€> å…©å€‹è¦–çª—å…±äº«è¤‡ç¿’æ¸…å–®
```

### D. CSS å®Œæ•´ç¨‹å¼ç¢¼ç¯„ä¾‹

```css
/* components/HandoutPanel/HandoutPanel.module.css */

.handout-panel {
  position: fixed;
  width: 300px;
  max-height: 500px;
  background: rgba(23, 23, 23, 0.98);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
  z-index: 1000;
  overflow: hidden;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.handout-panel.minimized {
  height: 40px;
  cursor: pointer;
}

.title-bar {
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.05);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  cursor: move;
  user-select: none;
}

.title-bar.draggable:active {
  cursor: grabbing;
}

.word-list {
  max-height: 150px;
  overflow-y: auto;
  padding: 12px;
}

.word-list-item {
  padding: 8px 12px;
  margin-bottom: 4px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.word-list-item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.word-list-item.selected {
  background: rgba(59, 130, 246, 0.2);
  border-left: 3px solid #3b82f6;
}

.difficulty-stars {
  color: #fbbf24;
}

.word-detail {
  padding: 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  max-height: 250px;
  overflow-y: auto;
}

.phonetic {
  color: #60a5fa;
  font-family: 'Courier New', monospace;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.tts-button {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 18px;
  transition: transform 0.2s;
}

.tts-button:hover {
  transform: scale(1.2);
}

.definition {
  margin-bottom: 12px;
  line-height: 1.6;
}

.examples {
  background: rgba(255, 255, 255, 0.03);
  padding: 12px;
  border-radius: 6px;
  margin-top: 12px;
}

.action-buttons {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.action-button {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.05);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}

.action-button:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-1px);
}

.video-stats {
  padding: 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  font-size: 14px;
}

.stat-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.export-button {
  width: 100%;
  padding: 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  border-radius: 6px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  margin-top: 12px;
}

.export-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

/* æ²è»¸æ¨£å¼ */
.word-list::-webkit-scrollbar,
.word-detail::-webkit-scrollbar {
  width: 6px;
}

.word-list::-webkit-scrollbar-track,
.word-detail::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.word-list::-webkit-scrollbar-thumb,
.word-detail::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.word-list::-webkit-scrollbar-thumb:hover,
.word-detail::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}
```

---

**æ–‡æª”çµæŸ**

*Generated by Agent-3 (Education Technology Expert)*
*Dubtitle Project - Handout Mode Design*
*Version 1.0 - 2025-11-16*
